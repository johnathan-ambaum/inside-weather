<!doctype html>
<html class="no-js" lang="{{ shop.locale }}">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta name="theme-color" content="{{ settings.color_button }}">
  <link rel="canonical" href="{{ canonical_url }}">

  <!-- preconnects -->
  <link rel="preconnect" href="https://banksy-images.s3.amazonaws.com">
  <link rel="preconnect" href="https://cdn.shopify.com">
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <!-- end preconnects -->

  {%- if settings.favicon -%}
    <link rel="shortcut icon" href="{{ settings.favicon | img_url: '32x32' }}" type="image/png" />
  {%- endif -%}

  {%- include 'seo-title' -%}
  <title>{{ seo_title }}</title>

  {%- if page_description -%}
  <meta name="description" content="{{ page_description | escape }}">
  {%- endif -%}

  {%- include 'social-meta-tags' -%}

  {% include 'font-face' %}
  {% include 'font-definitions' %}
  <link href="https://fonts.googleapis.com/css?family=Roboto:400,400i,500,500i,700,700i,900" rel="stylesheet">
  {{ 'theme.scss.css' | asset_url | stylesheet_tag }}

  <!-- Google Tag Manager -->
  <script>
    dataLayer = [{
      customerEmail: {{ customer.email | json }}{% if template.name == 'collection' %},
      productCategory: {{ collection.handle | json }}{% endif %}
    }];
  </script>
  {%- if template.name == 'product' -%}
    <script>
      dataLayer.push({
        totalPrice: {{ product.price | divided_by: 100 | json }},
        productName: {{ product.title | json }},
        productIds: [{{ product.selected_or_first_available_variant.sku | json }}],
        productCategory: {{ collection.handle | json }},
        productHandle: {{ product.handle | json }},
        ecommerce: {
          detail: {
            products: [{
              name: {{ product.title | json }},
              id: {{ product.selected_or_first_available_variant.sku | json }},
              price: {{ product.price | divided_by: 100 | json }},
              category: {{ collection.handle | json }}
            }]
          }
        }
      });
    </script>
  {%- endif -%}
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-N6SBKJC');</script>
  <!-- End Google Tag Manager -->

  <!-- FULLSTORY INTEGRATION -->
  <script> window['_fs_debug'] = false; window['_fs_host'] = 'fullstory.com'; window['_fs_org'] = 'GJDYQ'; window['_fs_namespace'] = 'FS'; (function(m,n,e,t,l,o,g,y){ if (e in m) {if(m.console && m.console.log) { m.console.log('FullStory namespace conflict. Please set window["_fs_namespace"].');} return;} g=m[e]=function(a,b,s){g.q?g.q.push([a,b,s]):g._api(a,b,s);};g.q=[]; o=n.createElement(t);o.async=1;o.src='https://'+_fs_host+'/s/fs.js'; y=n.getElementsByTagName(t)[0];y.parentNode.insertBefore(o,y); g.identify=function(i,v,s){g(l,{uid:i},s);if(v)g(l,v,s)};g.setUserVars=function(v,s){g(l,v,s)};g.event=function(i,v,s){g('event',{n:i,p:v},s)}; g.shutdown=function(){g("rec",!1)};g.restart=function(){g("rec",!0)}; g.consent=function(a){g("consent",!arguments.length||a)}; g.identifyAccount=function(i,v){o='account';v=v||{};v.acctId=i;g(o,v)}; g.clearUserCookie=function(){}; })(window,document,window['_fs_namespace'],'script','user'); </script>
  <!-- END FULLSTORY -->

  <!--pinterest verification-->
  <meta name="p:domain_verify" content="480b16c481147a04e085920b3d96104a"/>
  <!---END pinterest-->

  <script>
    document.documentElement.className = document.documentElement.className.replace('no-js', 'js');

    window.theme = window.theme || {};
    theme.strings = {
      addToCart: {{ 'products.product.add_to_cart' | t | json }},
      soldOut: {{ 'products.product.sold_out' | t | json }},
      unavailable: {{ 'products.product.unavailable' | t | json }},
      stockLabel: {{ 'products.product.stock_label' | t: count: '[count]' | json }},
      cartSavings: {{ 'cart.general.savings_html' | t: savings: '[savings]' | json }},
      cartEmpty: {{ 'cart.general.empty' | t | json }},
      cartTermsConfirmation: {{ 'cart.general.terms_confirm' | t | json }}
    };
    theme.settings = {
      cartType: {{ settings.cart_type | json }},
      moneyFormat: {{ shop.money_format | json }},
      quickView: {{ settings.quick_shop_enable }},
      themeVersion: "3.2.4"
    };
  </script>

  {{ '//code.jquery.com/jquery-3.1.0.min.js' | script_tag }}
  <script>theme.jQuery = jQuery;</script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/2.1.3/TweenMax.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.5/ScrollMagic.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.5/plugins/animation.gsap.min.js"></script>

  <!-- Browse and product customizer widgets -->
  {%- if template == 'product' or template == 'collection' or template.suffix == 'favorites' or template.suffix == 'free-swatches' or template.suffix == 'banner-carousel' or template.suffix == 'category-sofas' or template.suffix == 'living-room' or template.suffix == 'dining-room' or template.suffix == 'office' -%}
    {%- if customer -%}
      {%- if customer.metafields.global.favorites -%}
        {%- assign favorites = customer.metafields.global.favorites -%}
      {%- else -%}
        {%- assign favorites = '' | split: ',' -%}
      {%- endif -%}
      <script>
        pnwCfg = {
          id: {{ customer.id }},
          favoriteProducts: {{ favorites | json }}
        };
      </script>
    {%- endif -%}
    <link rel="stylesheet" href="{{ 'animate.css' | asset_url }}">
    <link rel="stylesheet" href="{{ 'widgets.css' | asset_url }}">
    <link rel="stylesheet" href="{{ 'product.scss.css' | asset_url }}">
    <script src="{{ 'manifest.js' | asset_url }}" defer></script>
    <script src="{{ 'widgets.vendor.js' | asset_url }}" defer></script>
    <script src="{{ 'widgets.js' | asset_url }}" defer></script>
    {% assign small_header = true %}
  {%- else -%}
    {% assign small_header = false %}
  {%- endif -%}
  <!-- end browse and product customizer widgets -->

  {{ content_for_header }}
  {% include 'oldIE-js' %}

  {% include 'defer-script' with 'vendor.js' %}

  {% if settings.enable_currencies %}
    <script src="/services/javascripts/currencies.js" defer="defer"></script>
    {% include 'defer-script' with 'jquery.currencies.min.js' %}
  {% endif %}

  {% include 'defer-script' with 'theme.js' %}

  {%- if template contains 'customers' -%}
    {% include 'defer-shopify-script' with 'shopify_common.js' %}
  {%- endif -%}

  <script>
    var _affirm_config = {
      public_api_key: "PP4A9PT9U27W09KA",
      script: "https://cdn1.affirm.com/js/v2/affirm.js"
    };
    (function(l,g,m,e,a,f,b){var d,c=l[m]||{},h=document.createElement(f),n=document.getElementsByTagName(f)[0],k=function(a,b,c){return function(){a[b]._.push([c,arguments])}};c[e]=k(c,e,"set");d=c[e];c[a]={};c[a]._=[];d._=[];c[a][b]=k(c,a,b);a=0;for(b="set add save post open empty reset on off trigger ready setProduct".split(" ");a<b.length;a++)d[b[a]]=k(c,e,b[a]);a=0;for(b=["get","token","url","items"];a<b.length;a++)d[b[a]]=function(){};h.async=!0;h.src=g[f];n.parentNode.insertBefore(h,n);delete g[f];d(g);l[m]=c})(window,_affirm_config,"affirm","checkout","ui","script","ready");
  // END AFFIRM.JS EMBED CODE
  </script>

  <!--Gem_Page_Header_Script-->
  {% include 'gem-app-header-scripts' %}
  <!--End_Gem_Page_Header_Script-->

  {% include 'minmaxify-head' %}

{% include 'pagefly-header' %}
</head>

<body class="template-{{ template | replace: '.', ' ' | truncatewords: 1, '' | handle }}{% if settings.enable_currencies %} currencies-enabled{% endif %}{% if small_header %} MainNav--Small{% endif %}" data-transitions="{{ settings.animate_page_transitions }}">

  <!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-N6SBKJC"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->

  {% if settings.animate_page_transitions %}
    <script type="text/javascript">window.setTimeout(function() { document.body.className += " loaded"; }, 25);</script>
  {% endif %}

  <a class="in-page-link visually-hidden skip-link" href="#MainContent">{{ 'general.accessibility.skip_to_content' | t }}</a>

  <div id="PageContainer" class="page-container" itemscope itemtype="http://schema.org/Store">
    <meta itemprop="name" content="{{ shop.name }}">

    <div class="transition-body">
      {% section 'top-bar' %}
      {% section 'header' %}

      <main class="main-content" id="MainContent">
        {{ content_for_layout }}
      </main>

      {%- unless template == 'collection' -%}
        {% section 'footer' %}
      {%- endunless -%}

    </div>
  </div>

  <script>
    if (window.location.hostname !== 'localhost') {
      jQuery(function($) {
        $('a[href^="http"], a[href^="//"]')
          .not('a[href^="'+window.location.protocol+'//'+window.location.hostname+'"]')
          .not('a[href^="/"]')
          .attr('target', '_blank');
      });
    }
  </script>

  {% section 'newsletter-popup' %}

  {% if settings.cart_type == 'drawer' %}
    {% include 'ajax-cart-template' %}
  {% endif %}

  {% if settings.enable_currencies %}
    <span
      id="CurrencyData"
      class="hide"
      data-shop-currency="{{ shop.currency }}"
      data-default-currency="{{ settings.default_currency | default: shop.currency }}"
      data-format="{{ settings.currency_format | default: 'money_with_currency_format' }}"
      data-money-format="{{ shop.money_format | strip_html }}"
      data-money-currency-format="{{ shop.money_with_currency_format | strip_html }}">
    </span>
  {% endif %}

  {% include 'qty-selector-template' %}
  {% include 'video-modal' %}
  {% include 'photoswipe-template' %}
  <!--Gem_Page_Footer_Script-->
  {% include 'gem-app-footer-scripts' %}
  <!--End_Gem_Page_Footer_Script-->

 <!--KLAVIYO NEWSLETTER SIGNUP INTEGRATION-->
 <script async type="text/javascript" src="//static.klaviyo.com/onsite/js/klaviyo.js?company_id=NTaKMV"></script>
 {% if page.handle == 'sign-up' %}
  <script>
    dataLayer = window.dataLayer || [];
    jQuery(function ($) {
      $('#MainContent').on('click', 'button', function () {
        var emailInput = document.querySelector('input[type="email"]');
        var emailRegex = /.+?@.+?\..+?/;
        if (emailInput && emailRegex.test(emailInput.value)) {
          dataLayer.push({
            event: 'newsletterSignup',
            eventCategory: 'signup',
            eventAction: 'sign_me_up',
            eventLabel: 'newsletter',
            eventValue: emailInput.value
          });
        }
      });
    });
  </script>
  {% endif %}
  {% unless customer %}
    {% if template.name == 'register' %}
    <script>
      localStorage.setItem('registrationStarted', 1);
    </script>
    {% endif %}
  {% endunless %}
  {% if customer %}
    <script>
      if (localStorage.getItem('registrationStarted')) {
        dataLayer.push({
          event: 'registrationComplete',
          eventCategory: 'complete_registration',
          eventAction: 'create',
          eventLabel: 'create_account',
          eventValue: {{ customer.email | json }}
        });
        localStorage.removeItem('registrationStarted');
      }
    </script>
  {% endif %}
  <script>
    jQuery(function ($) {
      $('.modal img.lazyload').each(function (i, el) {
        var src = el.dataset.src.replace('_{width}x', '');
        el.src = src;
        el.classList.remove('lazyload', 'lazypreload');
        el.classList.add('lazyloaded');
      });
    });
  </script>
  <script>
    Array.prototype.slice.call(document.querySelectorAll('video[autoplay]')).forEach(function (video) {
      video.setAttribute('playsinline', '');
      video.play();
    });
  </script>
  <!--NEW-->

  <!-- Start of insideweatherhelp Zendesk Widget script -->
  <style>
    /* force hide Zendesk when filters open */
    .BrowseFilters--Open .zEWidget-launcher {
      display: none !important;
    }
  </style>
  <script id="ze-snippet" src="https://static.zdassets.com/ekr/snippet.js?key=3aebd5a7-95db-462f-a80a-b30633da7997"> </script>
  <!-- End of insideweatherhelp Zendesk Widget script -->

  {% comment %} <!--OLD ZENDESK-->
  <!--Start of Zendesk Chat Script-->
   <script type="text/javascript">
  window.$zopim||(function(d,s){var z=$zopim=function(c){
  z._.push(c)},$=z.s=
  d.createElement(s),e=d.getElementsByTagName(s)[0];z.set=function(o){z.set.
  _.push(o)};z._=[];z.set._=[];$.async=!0;$.setAttribute('charset','utf-8');
  $.src='https://v2.zopim.com/?AJiZPSJSeobpdaCOBCILNjBFOfWzOEnD';z.t=+new Date;$.
  type='text/javascript';e.parentNode.insertBefore($,e)})(document,'script');
  </script>
  <!--End of Zendesk Chat Script--> {% endcomment %}

</body>
</html>
