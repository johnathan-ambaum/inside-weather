<div id="app">
  {% assign hasImage = false %}
  {% assign bannerContent = "{'items':[{'image':' ','heading':'Create your custom climate','description':'The Weather is now entirely up to you.','linkText':'Shop Sofas','url':'/pages/category-sofa'},{'image':' ','heading':'Create your custom climate.','description':'The Weather is now entirely up to you.','linkText':'Shop Armchair','url':'/pages/category-armchair'},{'image':' ','heading':'Create your custom climate','description':'The Weather is now entirely up to you.','linkText':'Shop Table','url':'/pages/category-table'}]}"%}

  <banner-carousel 
    :has-image="{{hasImage}}"
    :banner-content="{{bannerContent}}">
  </banner-carousel>

  {% assign listItems= "[{'image':'https://cdn.shopify.com/s/files/1/2994/0144/files/cat-link_1_livingrm.png?742906','buttonText':'Shop Living','link':'pages/category-sofa'},{'image':'https://cdn.shopify.com/s/files/1/2994/0144/files/cat-link_2_diningrm.png?742909','buttonText':'Shop Dining','link':'pages/category-dining-tables'},{'image':'https://cdn.shopify.com/s/files/1/2994/0144/files/cat-link_3_office.png?737551','buttonText':'Shop Office','link':'pages/category-lounge-chairs'}]"%}

  <div class="--custom-container category-list-container">
    <category-list 
      class="--pd-t-130 --pd-b-130" 
      :list-items="{{listItems}}"
    >
    </category-list>
  </div>

  {% assign valuePropsItems = "[{'image': 'https://cdn.shopify.com/s/files/1/2994/0144/files/vprop_img2.png?748574', 'targetPoint': 'free-shipping', 'accordionHead': 'Free shipping', accordionDescription: 'Made-to-order furniture, shipped in days, because life is too short to wait. Take the stress out of furniture shopping. Made-to-order furniture, shipped in days, because life is too short to wait. Take the stress out of furniture shopping.'}, {'image': 'https://cdn.shopify.com/s/files/1/2994/0144/files/vprop_img1.png?748574', 'targetPoint': '365-day-home-trial', 'accordionHead': '365 Day Home Trial', accordionDescription: 'Made-to-order furniture, shipped in days, because life is too short to wait. Take the stress out of furniture shopping. Made-to-order furniture, shipped in days, because life is too short to wait. Take the stress out of furniture shopping.'},{'image': 'https://cdn.shopify.com/s/files/1/2994/0144/files/vprop_img2.png?748574', 'targetPoint': 'crafted', 'accordionHead': 'California Crafted', accordionDescription: 'Made-to-order furniture, shipped in days, because life is too short to wait. Take the stress out of furniture shopping. Made-to-order furniture, shipped in days, because life is too short to wait. Take the stress out of furniture shopping.'}]" %}
  
  <div class="ValuePropsWrapper">
    <div class="--custom-container">
      <value-props
      :value-props-items="{{valuePropsItems}}"
      default-image="https://cdn.shopify.com/s/files/1/2994/0144/files/vprop_img1.png?748574"
      main-heading="A better way to shop for furniture"
      >
      </value-props>
    </div>
  </div>

  {% assign pressList = "[{'image':'https://cdn.shopify.com/s/files/1/2994/0144/files/press_logo_housemethod.png?751632','description':'Inside Weather is out to prove that ease and customization are not mutually exclusive.'},{'image':'https://cdn.shopify.com/s/files/1/2994/0144/files/press_logo_domino_2x_788a469b-7ccf-4ec6-a2eb-6b46463c92bb.png?751631','description':'A welcome addition to the new design world of ultra simplicity.'},{'image':'https://cdn.shopify.com/s/files/1/2994/0144/files/press_logo_washingtonpost.png?751634','description':'A welcome addition to the new design world of ultra simplicity.'},{'image':'https://cdn.shopify.com/s/files/1/2994/0144/files/press_logo_realsimple.png?751634','description':'Inside Weather is out to prove that ease and customization are not mutually exclusive.'}]"%}

  <div class="PressContainer">
    <div class="press--container">
      <press :press-list="{{pressList}}"></press>
    </div>
  </div>

  {% assign reviewContent = "[{'headContent':'Love It!','starCount':5,'reviewDetail':'Made-to-order furniture, shipped in days, because life is too short to wait. Take the stress out of furniture shopping. Made-to-order furniture, shipped in days, because life is too short to wait. Take the stress out of furniture shopping','image':'https://cdn.shopify.com/s/files/1/2994/0144/files/reviews_img1.png?753978','authorName':'Sophia','authorAddress':'Santa Ana, CA'},{'headContent':'Love It!','starCount':5,'reviewDetail':'Made-to-order furniture, shipped in days, because life is too short to wait. Take the stress out of furniture shopping. Made-to-order furniture, shipped in days, because life is too short to wait. Take the stress out of furniture shopping','image':'https://cdn.shopify.com/s/files/1/2994/0144/files/reviews_img1.png?753978','authorName':'Sophia','authorAddress':'Santa Ana, CA'},{'headContent':'Love It!','starCount':5,'reviewDetail':'Made-to-order furniture, shipped in days, because life is too short to wait. Take the stress out of furniture shopping. Made-to-order furniture, shipped in days, because life is too short to wait. Take the stress out of furniture shopping','image':'https://cdn.shopify.com/s/files/1/2994/0144/files/reviews_img1.png?753978','authorName':'Sophia','authorAddress':'Santa Ana, CA'}]"%}

  <div class="ReviewCarouselWrapper">
    <div class="--custom-container">
      <review-carousel 
        :review-content="{{reviewContent}}" 
        link-text="Read All Reviews"
      >
      </review-carousel>
    </div>
  </div>

  {% assign bannerSectionAssets = "[{'bgLarge':'https://cdn.shopify.com/s/files/1/2994/0144/files/design-services_bnr.png?751635', 'bgSmall': 'https://cdn2.shopify.com/s/files/1/2994/0144/files/banner-mobile-bg.png?1294680'}]"%}

  <banner 
    :banner-image="{{bannerSectionAssets}}"
    heading="Get professional help"
    description="First Class Service. Iâ€™m able to purchase exactly what I want without falling short of my dreams."
    button-text="Send an sos"
  >
  </banner>

  {% assign recentlySoldProducts = "[{'picture':'https://cdn.shopify.com/s/files/1/2994/0144/files/product-1.png?744727','userFirstName':'Sara','userSecondName':'F','productName':'Mod Velvet Powell Sofa in Jade Green','price':'$1198'},{'picture':'https://cdn.shopify.com/s/files/1/2994/0144/files/product-2.png?744727','userFirstName':'Sara','userSecondName':'F','productName':'Mod Velvet Powell Sofa in Jade Green','price':'$1198'},{'picture':'https://cdn.shopify.com/s/files/1/2994/0144/files/product-3.png?744727','userFirstName':'Sara','userSecondName':'F','productName':'Mod Velvet Powell Sofa in Jade Green','price':'$1198'},{'picture':'https://cdn.shopify.com/s/files/1/2994/0144/files/product-4.png?744727','userFirstName':'Sara','userSecondName':'F','productName':'Mod Velvet Powell Sofa in Jade Green','price':'$1198'},{'picture':'https://cdn.shopify.com/s/files/1/2994/0144/files/product-5.png?744727','userFirstName':'Sara','userSecondName':'F','productName':'Mod Velvet Powell Sofa in Jade Green','price':'$1198'},{'picture':'https://cdn.shopify.com/s/files/1/2994/0144/files/product-6.png?744727','userFirstName':'Sara','userSecondName':'F','productName':'Mod Velvet Powell Sofa in Jade Green','price':'$1198'},{'picture':'https://cdn.shopify.com/s/files/1/2994/0144/files/product-7.png?744727','userFirstName':'Sara','userSecondName':'F','productName':'Mod Velvet Powell Sofa in Jade Green','price':'$1198'},{'picture':'https://cdn.shopify.com/s/files/1/2994/0144/files/product-8.png?744727','userFirstName':'Sara','userSecondName':'F','productName':'Mod Velvet Powell Sofa in Jade Green','price':'$1198'},{'picture':'https://cdn.shopify.com/s/files/1/2994/0144/files/product-9.png?744727','userFirstName':'Sara','userSecondName':'F','productName':'Mod Velvet Powell Sofa in Jade Green','price':'$1198'}]"%}

  <recently-sold-products 
    :recently-sold-products="{{recentlySoldProducts}}"
    section-heading="Recently Sold"
    section-description="Made-to-order furniture, shipped in days, because life is too short to wait."
  >
  </recently-sold-products>
</div>

<script>
  jQuery(function ($) {
    var count = 0;
    jQuery('.point h3').on('click', (e) => {
      e.stopPropagation();
      const $ = jQuery;
      const targetParent = $('.descriptions .point');
      const allDescription = $('.descriptions .point p');
      var targetAttribute = e.target.attributes[0].value;
      if (e.target.parentElement.classList.contains('show-details')) {
        count ++;
        $('.descriptions h2').slideToggle();
        toggleSlide(e.target.parentElement.children[1]);
        e.target.parentElement.classList.remove('show-details');
      }else {
        $(allDescription).slideUp();
        $('.descriptions h2').slideUp();
        downSlide(e.target.parentElement.children[1]);
        $(targetParent).removeClass('show-details');
        e.target.parentElement.classList.add('show-details');
      }
      $('.image_wrapper figure').each(function(){
        var recieverAttribute = this.getAttribute('data-src');
        if(recieverAttribute === targetAttribute) {
          $('.image_wrapper figure').removeClass('slide_up');
          if(count === 0) {
            $(this).addClass('slide_up');
          }else {
            $('.image_wrapper figure').removeClass('slide_up');
          } 
        }
      }); 
      if(count === 1) {
        count = 0;
      }
    });

    const controller = new ScrollMagic.Controller();

    const bannerCarouselTimeline = new TimelineLite();
    bannerCarouselTimeline.fromTo($('.CarouselBanner__image'), 0.8, {opacity: 0, scale: 1.05}, {opacity: 1, scale: 1, ease: ExpoScaleEase.config(1.05, 1, Power0.easeIn)})
      .fromTo($('.CarouselBanner__content h2'), 1,{opacity: 0, y: 20}, {opacity: 1, y: 0, ease: Circ.easeOut}, 0.5)
      .fromTo($('.CarouselBanner__content p'), 1,{opacity: 0, y: 20}, {opacity: 1, y: 0, ease: Circ.easeOut}, 0.5)
      .fromTo($('.CarouselBanner__content a'), 1,{opacity: 0, y: 20}, {opacity: 1, y: 0, ease: Circ.easeOut}, 0.75)
      .call(function(){
        $('.CarouselBanner .owl-dots button').each(function(i){
          var row = $(this);
          setTimeout(function() {
            TweenMax.fromTo(row, 0.5,{opacity: 0, y: 20}, {opacity: 1, y: 0, ease: Circ.easeOut}, 0.8)
            if($('.CarouselBanner .owl-dots button').length === (i + 1)) {
              $('.CarouselBanner').addClass('--animLoaded');
            }
          }, 200 * i);
        });
      });
    const bannerCarouselTimelineSet = new ScrollMagic.Scene({
      triggerElement: '.CarouselBanner',
      reverse: false
    }).setTween(bannerCarouselTimeline).addTo(controller);

    const catTimeline = new TimelineLite()
    catTimeline.fromTo($('._category-lists'), 0.9, {opacity:0, y: 50}, {opacity: 1, y: 0, ease: Circ.easeOut})
    const catTimelineSet = new ScrollMagic.Scene({
      triggerElement: '.CarouselBanner .owl-dots',  
      reverse: false
    }).setTween(catTimeline).addTo(controller);

    const valuePropsTimeline = new TimelineLite()
    valuePropsTimeline.fromTo($('.ValueProps .image_wrapper'), 0.9, {opacity: 0, y: 20, ease: Circ.easeOut}, {opacity: 1, y: 0})
      .fromTo($('.ValueProps .descriptions h2'), 0.9, {opacity: 0, y: 20}, {opacity: 1, y: 0, ease: Circ.easeOut}, 0.5)
    const valuePropsTimelineScene = new ScrollMagic.Scene({
      triggerElement: '.CategoryList ._button-wrapper',
      reverse: false
    }).setTween(valuePropsTimeline).addTo(controller);

    $(window).on('load', function () {
      if($(window).width() < 768) {
        ValuePropsMobAnim();
        reviewCarouselMobAnim();
      }
      if($(window).width() >= 768) {
        ValuePropsDesktopAnim();
        reviewCarouselDekstopAnim();
      }
    });

    $(document).find('.more-info').on('click', function (e) {
      const targetElement = e.target.parentElement
      $(e.target).toggleClass('close')
      $(targetElement).find('.RecentlySoldProducts--overlayWrapper').toggleClass('show')
    })

    function ValuePropsDesktopAnim() {
      const valuePropsPointsTimeline = new TimelineLite()
      valuePropsPointsTimeline.call(function () {
        $('.ValueProps .descriptions .details .point').each(function (i) {
          var row = $(this);
          setTimeout(function() {
            TweenMax.fromTo(row, 1.5, {opacity: 0, y: 20}, {opacity: 1, y: 0, ease: Circ.easeOut}, 1);
          }, 200 * i);
        });
      })
      const valuePropsPointsScene = new ScrollMagic.Scene({
        triggerElement: '.ValueProps .descriptions h2',
        reverse: false
      }).setTween(valuePropsPointsTimeline).addTo(controller);
    }
    function ValuePropsMobAnim() {
      const valuePropsPointsMobTimeline = new TimelineLite()
      valuePropsPointsMobTimeline.call(function () {
        $('.ValueProps .descriptions .details .point').each(function (i){
          var row = $(this);
          setTimeout(function() {
            TweenMax.fromTo(row, 1.5, {opacity: 0, y: 20}, {opacity: 1, y: 0, ease: Circ.easeOut}, 1);
          }, 200 * i);
        });
      })
      const valuePropsPointsMobScene = new ScrollMagic.Scene({
        triggerElement: '.ValueProps',
        reverse: false
      }).setTween(valuePropsPointsMobTimeline).addTo(controller);
    }

    const pressTimeline = new TimelineLite()
    pressTimeline.fromTo($('.Press ul li'), 1,{opacity: 0, y: 100}, {opacity: 1, y: 0, ease: Circ.easeOut})
    const pressTimelineScene = new ScrollMagic.Scene({
      triggerElement: '.ValueProps .descriptions .details .point',
      reverse: false
    }).setTween(pressTimeline).addTo(controller);

    function reviewCarouselDekstopAnim() {
      const ReviewCarouselTimeline = new TimelineLite()
      ReviewCarouselTimeline.fromTo($('.ReviewCarousel .owl-item .Review__image'), 0.9,{opacity: 0, y: 50}, {opacity: 1, y: 0, ease: Circ.easeOut})
        .fromTo($('.ReviewCarousel .owl-item .Review__content'), 0.9, {opacity: 0, y: 50}, {opacity: 1, y: 0, ease: Circ.easeOut}, 0.5)
      const ReviewCarouselTimelineScene = new ScrollMagic.Scene({
        triggerElement: '.ReviewCarouselWrapper',
        reverse: false
      }).setTween(ReviewCarouselTimeline).addTo(controller);
    }

    function reviewCarouselMobAnim() {
      const ReviewCarouselMobTimeline = new TimelineLite()
      ReviewCarouselMobTimeline.fromTo($('.ReviewCarousel .owl-item .Review__image'), 0.9,{opacity: 0, y: 50}, {opacity: 1, y: 0, ease: Circ.easeOut})
        .fromTo($('.ReviewCarousel .owl-item .Review__content'), 0.9, {opacity: 0, y: 50}, {opacity: 1, y: 0, ease: Circ.easeOut}, 0.5)
      const ReviewCarouselMobTimelineScene = new ScrollMagic.Scene({
        triggerElement: '.Press ul li.press-list-2',
        reverse: false
      }).setTween(ReviewCarouselMobTimeline).addTo(controller);
    }

    const bannerTimeline = new TimelineLite();
    bannerTimeline.fromTo($('.Banner .Banner__wrapper'), 0.8, {opacity: 0, scale: 1.05}, {opacity: 1, scale: 1, ease: ExpoScaleEase.config(1.05, 1)})
      .fromTo($('.Banner .Banner__wrapper .Banner__content h2'), 1, {opacity: 0, y: 20}, {opacity: 1, y: 0}, 0.75)
      .fromTo($('.Banner .Banner__wrapper .Banner__content p'), 1, {opacity: 0, y: 20}, {opacity: 1, y: 0}, 1)
      .fromTo($('.Banner .Banner__wrapper .Banner__content ._button-wrapper'), 1, {opacity: 0, y: 20}, {opacity: 1, y: 0, ease: Circ.easeOut}, 1.5)
    const bannerScene = new ScrollMagic.Scene({
      triggerElement: '.ReviewCarouselWrapper .owl-item.active .Review__author',
      reverse: false
    }).setTween(bannerTimeline).addTo(controller);

    const productTimeline = new TimelineLite()
    productTimeline.fromTo($('.SoldProducts .heading h2'), 0.7, {opacity: 0, y: 20}, {opacity: 1, y: 0, ease: Circ.easeOut})
      .fromTo($('.SoldProducts .heading  p'), 0.7, {opacity: 0, y: 20}, {opacity: 1, y: 0, ease: Circ.easeOut}, 0.5)
    const productScene = new ScrollMagic.Scene({
      triggerElement: '.SoldProducts',
      reverse: false
    }).setTween(productTimeline).addTo(controller);

    const soldProductTimeline = new TimelineLite()
    soldProductTimeline.call(function () {
      $('.RecentlySoldProducts .RecentlySoldProducts--column').each(function (i) {
        var SecondRow = $(this).find('img');
        setTimeout(function () {
          TweenMax.fromTo(SecondRow, 0.9, {opacity: 0, y: 50}, {opacity: 1, y: 0, ease: Circ.easeOut});
          if($('.RecentlySoldProducts .RecentlySoldProducts--column').length === (i + 1)) {
            $('.RecentlySoldProducts .RecentlySoldProducts--column').addClass('--animLoaded');
          }
        }, 200 * i)
      });
    })
    const soldProductSecondScene = new ScrollMagic.Scene({
      triggerElement: '.SoldProducts .heading  p',
      reverse: false
    }).setTween(soldProductTimeline).addTo(controller);

    



  });
  function toggleSlide(item) {
    jQuery(item).slideToggle();
  }
  function downSlide(item) {
    jQuery(item).slideDown();
  }
</script>