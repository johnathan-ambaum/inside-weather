<div id="app">
  {% assign hasImage = true %}
  {% assign disableSlideContent = true %}
  {% assign bannerContent = "{'items':[{'image':'https://cdn.shopify.com/s/files/1/2994/0144/files/052220_hp_ido-bnr_d.jpg?v=1590106860',  'imageSm':'https://cdn.shopify.com/s/files/1/2994/0144/files/052220_hp_ido-bnr_m.jpg?v=1590106860', 'url':'https://insideweather.com/pages/ido-collection'},{'image':'https://cdn.shopify.com/s/files/1/2994/0144/files/041020_hp-tb_d_flw.jpg?v=1586464900','imageSm':'https://cdn.shopify.com/s/files/1/2994/0144/files/041020_hp-tb_m_flw.jpg?v=1586464900','url':'https://insideweather.com/pages/franklloydwright'},{'image':'https://cdn.shopify.com/s/files/1/2994/0144/files/041020_hp-tb_d_halfnhalf.jpg?v=1586464900','imageSm':'https://cdn.shopify.com/s/files/1/2994/0144/files/041020_hp-tb_m_halfnhalf.jpg?v=1586464900','url':'https://insideweather.com/pages/living-room'},{'image':'https://cdn.shopify.com/s/files/1/2994/0144/files/032120_hp_jorn-bnr_d.jpg?v=1584831590','imageSm':'https://cdn.shopify.com/s/files/1/2994/0144/files/032120_hp_jorn-bnr_m.jpg?v=1584831589','url':'https://insideweather.com/pages/the-wfh-desk'}]}"%}

  <div class="--clip-header">
    <banner-carousel
    :has-image="{{hasImage}}"
    :banner-content="{{bannerContent}}"
    :disable-slide-content="{{disableSlideContent}}"
    >
    </banner-carousel>
  </div>

  {% comment %}
  <div class="staticBannerWrapper --clip-header">
    <static-banner
      desktop-banner="https://cdn.shopify.com/s/files/1/2994/0144/files/021720_hp-tb_d_v1.jpg?v=1581653966"
      mobile-banner="https://cdn.shopify.com/s/files/1/2994/0144/files/021720_hp-tb_m_v1.jpg?v=1581653966"
      responsive-point="840px"
      banner-link="https://insideweather.com/pages/feb-2020-sale"
    >
    </static-banner>
  </div>
  {% endcomment %}


  {% assign listItems= "[{'image':'https://cdn.shopify.com/s/files/1/2994/0144/files/3.0_hp_cat_1-min.jpg?1657935','buttonText':'Shop Living','link':'https://insideweather.com/pages/living-room'},{'image':'https://cdn.shopify.com/s/files/1/2994/0144/files/3.0_hp_cat_2-min.jpg?1657935','buttonText':'Shop Dining','link':'https://insideweather.com/pages/dining-room'},{'image':'https://cdn.shopify.com/s/files/1/2994/0144/files/3.0_hp_cat_3-min.jpg?1657935','buttonText':'Shop Office','link':'https://insideweather.com/pages/office'}]"%}

  <div class="--custom-container category-list-container">
    <category-list
      class="--pd-t-90 --pd-b-130"
      :list-items="{{listItems}}"
    >
    </category-list>
  </div>

  {% assign valuePropsItems = "[{'isVideo':'false', 'url': 'https://cdn.shopify.com/s/files/1/2994/0144/files/3.0_hp_vprop_02-ca-crafted-min.jpg?1657939', 'targetPoint': 'crafted', 'accordionHead': 'California Crafted', accordionDescription: 'Every one of our pieces is made-to-order from our workshop in California. Sawing, sewing, packaging, and shipping—we see it all through from start to finish!'}, {'isVideo':'true', 'url': 'https://cdn.shopify.com/s/files/1/2994/0144/files/3.0_hp_vprop_03-free-shipping.mp4?1657939', 'targetPoint': 'quick-ship-custom', 'accordionHead': 'Quick Ship Custom', accordionDescription: 'Custom furniture no longer means months of waiting. Our business model allows for each product to be highly customized to you, and sent off to your doorstep within a matter of days. Did we mention everything ships free?'},{'isVideo':'false', 'url': 'https://cdn.shopify.com/s/files/1/2994/0144/files/3.0_hp_vprop_04-home-trial-min.jpg?1657939', 'targetPoint': '365-day-home-trial', 'accordionHead': '365 Day Home Trial', accordionDescription: 'Take some time to get acclimated to your new furniture. In fact, take all four seasons if you have to! You’ve got 365 days to try it out. Still not satisfied? We’ll take it back.'}, {'isVideo':'false', 'url': 'https://cdn.shopify.com/s/files/1/2994/0144/files/3.0_hp_vprop_04-sustainable-min.jpg?v=1583277272', 'targetPoint': 'sustainable-furniture', 'accordionHead': 'Sustainable Furniture', accordionDescription: 'We believe that in order to design for the Inside, we must consider the Outside. All of our materials are selected with intention—take our sofa for example, which upcycles over 200 plastic water bottles. Additionally, for every order placed with us, one tree is planted via the National Forest Foundation. Sleep easier knowing you’ve got the most sustainable furniture on the market.'}]" %}

  <div class="ValuePropsWrapper">
    <div class="--custom-container">
      <value-props
      :value-props-items="{{valuePropsItems}}"
      default-image="https://cdn.shopify.com/s/files/1/2994/0144/files/3.0_hp_vprop_01-default-min.jpg?1657939"
      main-heading="Furniture shopping that puts you in charge."
      >
      </value-props>
    </div>
  </div>

  {% assign pressList = "[{'image': 'https://cdn.shopify.com/s/files/1/2994/0144/files/press_logo_nytimes.png?v=1586276562','description':'The sofas start at $898 — a substantial savings over traditional custom furniture, which can run into five figures.', 'linkTo': 'https://insideweather.com/pages/press'},{'image': 'https://cdn.shopify.com/s/files/1/2994/0144/files/press_logo_fortune.png?v=1565744852','description':'For the truly creative types who want something beyond white, black or birch, it’s a dream.', 'linkTo': 'https://insideweather.com/pages/press'},{ 'image': 'https://cdn.shopify.com/s/files/1/2994/0144/files/press_logo_realsimple.png?v=1562332933','description':'Chairs in customized colors, sideboards with funky patterns, mini sofas…Inside Weather has them all.', 'linkTo': 'https://insideweather.com/pages/press'},{'image':'https://cdn.shopify.com/s/files/1/2994/0144/files/press_logo_britco.png?v=1565744852','description':'No more MALM monotony here!', 'linkTo': 'https://insideweather.com/pages/press'},{'image':'https://cdn.shopify.com/s/files/1/2994/0144/files/press_logo_housemethod.png?v=1562332920','description':'Custom Furniture for Under $1K? Alright, then.', 'linkTo': 'https://insideweather.com/pages/press'}]"%}

  <div class="PressContainer">
    <div class="press--container">
      <press :press-list="{{pressList}}"></press>
    </div>
  </div>

  {% assign reviewContent = "[{'headContent':'Family loves it!','starCount':5,'reviewDetail':'it’s the perfect size for a mom, 2 kids and a dog to sit together and read or watch some Netflix.','image':'https://cdn.shopify.com/s/files/1/2994/0144/files/3.0_hp_reviews_01-min.jpg?1657950','reviewer':'Erin W.','reviewerAddress':'Raleigh, NC'},{'headContent':'Best of both worlds','starCount':5,'reviewDetail':'I love my round coffee table! I would been looking for years for a simple one, and i was SO excited to finally find something well designed AND affordable…although when I saw all the pattern options i was tempted… you can’t go wrong with this company!','image':'https://cdn.shopify.com/s/files/1/2994/0144/files/3.0_hp_reviews_02-min.jpg?1657950','reviewer':'Kirstin','reviewerAddress':'San Francisco, CA'},{'headContent':'Easy and fun!','starCount':5,'reviewDetail':'So happy with my new dining table and chairs!','image':'https://cdn.shopify.com/s/files/1/2994/0144/files/3.0_hp_reviews_03-min.jpg?1657950','reviewer':'Marija D.','reviewerAddress':'Los Angeles, CA'}]"%}

  <div class="ReviewCarouselWrapper">
    <div class="--custom-container">
      <banner-review-carousel
        :review-content="{{reviewContent}}"
        link-text="Read All Reviews"
        link-to="/pages/reviews"
      >
      </banner-review-carousel>
    </div>
  </div>

  {% assign bannerSectionAssets = "[{'bgLarge':'https://cdn.shopify.com/s/files/1/2994/0144/files/3.0_hp_design-services_d-min.jpg?1657951', 'bgSmall': 'https://cdn.shopify.com/s/files/1/2994/0144/files/3.0_hp_design-services_m-min.jpg?1658615'}]"%}

  <banner
    :banner-image="{{bannerSectionAssets}}"
    banner-heading="Free Design Services"
    banner-description="Our design experts are here to talk you through any dilemma."
    button-text="Send an sos"
    button-link="https://insideweather.com/pages/work-with-a-designer"
  >
  </banner>

  {% assign recentlySoldProducts = "[{'picture':'https://banksy-images.s3.amazonaws.com/items/48S7E8D7023/48S7E8D7023-0_small.jpg','userFirstName':'Sam','userSecondName':'B.','productName':'Latte Round Dining Table in White Marble','price':'$408', 'targetLink': 'https://insideweather.com/products/dt12ac13-latte-round-dining-table-in-white-marble'},{'picture':'https://banksy-images.s3.amazonaws.com/items/141S205E0AF4/141S205E0AF4-0_small.jpg','userFirstName':'Eric','userSecondName':'V.','productName':'Cross Weave Asher Sofette in Yale Blue','price':'$1,023', 'targetLink': 'https://insideweather.com/products/se22aa1013101012-cross-weave-asher-sofette-in-yale-blue'},{'picture':'https://banksy-images.s3.amazonaws.com/items/47SA643C56D/47SA643C56D-0_small.jpg','userFirstName':'Tatiana','userSecondName':'L.','productName':'Latte Round Side Table in Latte Wood','price':'$118', 'targetLink': 'https://insideweather.com/products/st12fi12-latte-round-side-table-in-latte-wood'},{'picture':'https://banksy-images.s3.amazonaws.com/items/250SED4C3B56/250SED4C3B56-0_large.jpg','userFirstName':'Bailey','userSecondName':'A.','productName':'Micro Suede Powell Sectional in Whiskey','price':'$1,698', 'targetLink': 'https://insideweather.com/products/sc12ab10111416-micro-suede-powell-sectional-in-whiskey'},{'picture':'https://banksy-images.s3.amazonaws.com/items/195SA4C4BC40/195SA4C4BC40-1_large.jpg','userFirstName':'Yoshiko','userSecondName':'H.','productName':'Latte Sloan Credenza in White','price':'$568', 'targetLink': 'https://insideweather.com/products/cr10ac1114-latte-sloan-credenza-in-white'},{'picture':'https://banksy-images.s3.amazonaws.com/items/149SBC9A58B2/149SBC9A58B2-0_small.jpg','userFirstName':'BJ','userSecondName':'M.','productName':'Latte Vita Lounge Chair in Midnight Splash','price':'$523', 'targetLink': 'https://insideweather.com/products/vl11ff-latte-vita-lounge-chair-in-midnight-splash'},{'picture':'https://banksy-images.s3.amazonaws.com/items/HD125/HD125-0_small.jpg','userFirstName':'Milo','userSecondName':'T.','productName':'Nordic Coat Rack','price':'$149', 'targetLink': 'https://insideweather.com/products/hd125-nordic-coat-rack'},{'picture':'https://banksy-images.s3.amazonaws.com/items/253SDB1CA72A/253SDB1CA72A-0_small.jpg','userFirstName':'David','userSecondName':'G.','productName':'Latte Polk Armchair in Evening Abstraction','price':'$213', 'targetLink': 'https://insideweather.com/products/cd111112gz10-latte-polk-armchair-in-evening-abstraction'},{'picture':'https://banksy-images.s3.amazonaws.com/items/47S86099021/47S86099021-0_small.jpg','userFirstName':'Lily','userSecondName':'B.','productName':'Espresso Rectangle Coffee Table in Espresso Wood','price':'$218', 'targetLink': 'https://insideweather.com/products/ct15fy13-espresso-rectangle-coffee-table-in-espresso-wood'}]"%}

  <recently-sold-products
    :recently-sold-products="{{recentlySoldProducts}}"
    section-heading="Recently Sold"
    section-description="Take a look at what our factory crew is working on right now!"
  >
  </recently-sold-products>
</div>

<script>

  jQuery(function ($) {
    var count = 0;
    var playerId = '';
    jQuery('.point h3').on('click', (e) => {
      e.stopPropagation();
      const $ = jQuery;
      const targetParent = $('.descriptions .point');
      const allDescription = $('.descriptions .point p');
      var targetAttribute = e.target.attributes[0].value;
      if (e.target.parentElement.classList.contains('show-details')) {
        count ++;
        $('.descriptions h2').slideToggle();
        toggleSlide(e.target.parentElement.children[1]);
        e.target.parentElement.classList.remove('show-details');
      }else {
        $(allDescription).slideUp();
        $('.descriptions h2').slideUp();
        downSlide(e.target.parentElement.children[1]);
        $(targetParent).removeClass('show-details');
        e.target.parentElement.classList.add('show-details');
      }
      $('.image_wrapper figure').each(function(){
        var recieverAttribute = this.getAttribute('data-src');
        if(recieverAttribute === targetAttribute) {
          $('.image_wrapper figure').removeClass('slide_up');
          if(count === 0) {
            $(this).addClass('slide_up');
          }else {
            $('.image_wrapper figure').removeClass('slide_up');
          }
          if($(this).find('video').length > 0) {
            var player = $(this).find('video');
            playerId = $(this).find('video')[0].id;
            player[0].play()
          } else {
            if (playerId !== '') {
              $('#' + playerId)[0].pause();
            }
          }

        }
      });
      if(count === 1) {
        count = 0;
      }
    });

    const controller = new ScrollMagic.Controller();

    const bannerCarouselTimeline = new TimelineLite();
    bannerCarouselTimeline.fromTo($('.CarouselBanner__image'), 0.8, {opacity: 0, scale: 1.05}, {opacity: 1, scale: 1, ease: ExpoScaleEase.config(1.05, 1, Power0.easeIn)})
      .fromTo($('.CarouselBanner__content h2'), 1,{opacity: 0, y: 20}, {opacity: 1, y: 0, ease: Circ.easeOut}, 0.5)
      .fromTo($('.CarouselBanner__content p'), 1,{opacity: 0, y: 20}, {opacity: 1, y: 0, ease: Circ.easeOut}, 0.5)
      .fromTo($('.CarouselBanner__content a'), 1,{opacity: 0, y: 20}, {opacity: 1, y: 0, ease: Circ.easeOut}, 0.75)
      .call(function(){
        $('.CarouselBanner .owl-dots button').each(function(i){
          var row = $(this);
          setTimeout(function() {
            TweenMax.fromTo(row, 0.5,{opacity: 0, y: 20}, {opacity: 1, y: 0, ease: Circ.easeOut}, 0.8)
            if($('.CarouselBanner .owl-dots button').length === (i + 1)) {
              $('.CarouselBanner').addClass('--animLoaded');
            }
          }, 200 * i);
        });
      });
    const bannerCarouselTimelineSet = new ScrollMagic.Scene({
      triggerElement: '.CarouselBanner',
      reverse: false
    }).setTween(bannerCarouselTimeline).addTo(controller);

    $(window).on('load', function () {
      if($(window).width() < 768) {
        ValuePropsMobAnim();
        reviewCarouselMobAnim();
      }
      if($(window).width() >= 768) {
        ValuePropsDesktopAnim();
        reviewCarouselDekstopAnim();
      }
    });

    $(document).find('.more-info').on('click', function (e) {
      const targetElement = e.target.parentElement
      $(e.target).toggleClass('close')
      $(targetElement).find('.RecentlySoldProducts--overlayWrapper').toggleClass('show')
    })

    function ValuePropsDesktopAnim() {
      const valuePropsPointsTimeline = new TimelineLite()
      valuePropsPointsTimeline.call(function () {
        $('.ValueProps .descriptions .details .point').each(function (i) {
          var row = $(this);
          setTimeout(function() {
            TweenMax.fromTo(row, 1.5, {opacity: 0, y: 20}, {opacity: 1, y: 0, ease: Circ.easeOut}, 1);
          }, 200 * i);
        });
      })
      const valuePropsPointsScene = new ScrollMagic.Scene({
        triggerElement: '.ValueProps .descriptions h2',
        reverse: false
      }).setTween(valuePropsPointsTimeline).addTo(controller);
    }
    function ValuePropsMobAnim() {
      const valuePropsPointsMobTimeline = new TimelineLite()
      valuePropsPointsMobTimeline.call(function () {
        $('.ValueProps .descriptions .details .point').each(function (i){
          var row = $(this);
          setTimeout(function() {
            TweenMax.fromTo(row, 1.5, {opacity: 0, y: 20}, {opacity: 1, y: 0, ease: Circ.easeOut}, 1);
          }, 200 * i);
        });
      })
      const valuePropsPointsMobScene = new ScrollMagic.Scene({
        triggerElement: '.ValueProps',
        reverse: false
      }).setTween(valuePropsPointsMobTimeline).addTo(controller);
    }

    const pressTimeline = new TimelineLite()
    pressTimeline.fromTo($('.Press ul li'), 1,{opacity: 0, y: 100}, {opacity: 1, y: 0, ease: Circ.easeOut})
    const pressTimelineScene = new ScrollMagic.Scene({
      triggerElement: '.ValueProps .descriptions .details .point',
      reverse: false
    }).setTween(pressTimeline).addTo(controller);

    function reviewCarouselDekstopAnim() {
      const element = '.ReviewCarouselWrapper .owl-item .Review__image';
      var reviewSetTarget = '.ReviewCarouselWrapper'
      const reviewSet = TweenMax.staggerFromTo(element, 0.9,
        {
          opacity: 0,
          y: 50
        },{
          opacity: 1,
          y: 0,
          force3D: true,
        }, 0.2);
      new ScrollMagic.Scene( {
        triggerElement: reviewSetTarget,
        reverse: false,
        triggerHook: "onEnter",
        offset: 250
      }).setTween(reviewSet).addTo(controller);

      const ReviewContentElement = '.ReviewCarouselWrapper .owl-item .Review__content';
      const reviewContentSet = TweenMax.staggerFromTo(ReviewContentElement, 0.9,
        {
          opacity: 0,
          y: 50
        },{
          opacity: 1,
          y: 0,
          force3D: true,
        }, 0.2);
      new ScrollMagic.Scene( {
        triggerElement: reviewSetTarget,
        reverse: false,
        triggerHook: "onEnter",
        offset: 250
      }).setTween(reviewContentSet).addTo(controller);

    }

    function reviewCarouselMobAnim() {
      const ReviewCarouselMobTimeline = new TimelineLite()
      ReviewCarouselMobTimeline.fromTo($('.ReviewCarouselWrapper .owl-item .Review__image'), 0.9,{opacity: 0, y: 50}, {opacity: 1, y: 0, ease: Circ.easeOut})
        .fromTo($('.ReviewCarouselWrapper .owl-item .Review__content'), 0.9, {opacity: 0, y: 50}, {opacity: 1, y: 0, ease: Circ.easeOut}, 0.5)
      const ReviewCarouselMobTimelineScene = new ScrollMagic.Scene({
        triggerElement: '.Press ul li.press-list-2',
        reverse: false
      }).setTween(ReviewCarouselMobTimeline).addTo(controller);
    }

    const bannerTimeline = new TimelineLite();
    bannerTimeline.fromTo($('.Banner .Banner__wrapper'), 0.8, {opacity: 0, scale: 1.05}, {opacity: 1, scale: 1, ease: ExpoScaleEase.config(1.05, 1)})
      .fromTo($('.Banner .Banner__wrapper .Banner__content h2'), 1, {opacity: 0, y: 20}, {opacity: 1, y: 0}, 0.75)
      .fromTo($('.Banner .Banner__wrapper .Banner__content p'), 1, {opacity: 0, y: 20}, {opacity: 1, y: 0}, 1)
      .fromTo($('.Banner .Banner__wrapper .Banner__content ._button-wrapper'), 1, {opacity: 0, y: 20}, {opacity: 1, y: 0, ease: Circ.easeOut}, 1.5)
    const bannerScene = new ScrollMagic.Scene({
      triggerElement: '.ReviewCarouselWrapper .owl-item.active .Review__author',
      reverse: false
    }).setTween(bannerTimeline).addTo(controller);

    const productTimeline = new TimelineLite()
    productTimeline.fromTo($('.SoldProducts .heading h2'), 0.7, {opacity: 0, y: 20}, {opacity: 1, y: 0, ease: Circ.easeOut})
      .fromTo($('.SoldProducts .heading  p'), 0.7, {opacity: 0, y: 20}, {opacity: 1, y: 0, ease: Circ.easeOut}, 0.5)
    const productScene = new ScrollMagic.Scene({
      triggerElement: '.SoldProducts',
      reverse: false
    }).setTween(productTimeline).addTo(controller);

    const soldProductTimeline = new TimelineLite()
    soldProductTimeline.call(function () {
      $('.RecentlySoldProducts .RecentlySoldProducts--column').each(function (i) {
        var SecondRow = $(this).find('img');
        setTimeout(function () {
          TweenMax.fromTo(SecondRow, 0.9, {opacity: 0, y: 50}, {opacity: 1, y: 0, ease: Circ.easeOut});
          if($('.RecentlySoldProducts .RecentlySoldProducts--column').length === (i + 1)) {
            $('.RecentlySoldProducts .RecentlySoldProducts--column').addClass('--animLoaded');
          }
        }, 200 * i)
      });
    })
    const soldProductSecondScene = new ScrollMagic.Scene({
      triggerElement: '.SoldProducts .heading  p',
      reverse: false
    }).setTween(soldProductTimeline).addTo(controller);





  });
  function toggleSlide(item) {
    jQuery(item).slideToggle();
  }
  function downSlide(item) {
    jQuery(item).slideDown();
  }
</script>
