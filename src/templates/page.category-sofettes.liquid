<div id="app">
  <div class="categorySofas">
    {% assign hideDesktopSlider = true %}
    {% assign hideMobileSlider = true %}
    {% assign hasBannerContent = true %}
    {% assign bannerContent = "{'items':[{'image':'http://cdn.insideweather.com/cat/sofa-line/tb/cat_sofette_tb_d_v2.jpg', 'imageSm': 'http://cdn.insideweather.com/cat/sofa-line/tb/cat_sofette_tb_m_v2.jpg','heading':'CUSTOM SOFETTES','description':'Made-to-order sustainably, quickly custom-built from scratch here in the U.S., and ships free to you in a manageable box.','linkText':'Customize now','url':'https://insideweather.com/products/se17an131010171010-custom-issa-sofette-in-cloud'}]}"%}

    <category-banner 
      :banner-content="{{bannerContent}}"
      :hide-desktop-slider="{{hideDesktopSlider}}"
      :hide-mobile-slider="{{hideMobileSlider}}"
      :has-banner-content="{{hasBannerContent}}"

      >
    </category-banner>

    <hiw-props></hiw-props>

    {% assign productCollections = "[{'image': 'https://cdn.shopify.com/s/files/1/2994/0144/files/3.0_cat_sofette_col_01.jpg?1661542', 'title': 'Issa Sofette', 'linkText': 'Customize starting at $648', hyperLink: 'https://insideweather.com/products/se18bd11101019-pebble-weave-issa-sofette-in-heathered-slate'}, {'image': 'https://cdn.shopify.com/s/files/1/2994/0144/files/3.0_cat_sofette_col_02.jpg?1661542', 'title': 'Levi Sofette', 'linkText': 'Customize starting at $898', hyperLink: 'https://insideweather.com/products/se15bc11101017-pebble-weave-levi-sofette-in-heathered-taupe'}, {'image': 'https://cdn.shopify.com/s/files/1/2994/0144/files/3.0_cat_sofette_col_03.jpg?1661542', 'title': 'Powell Sofette', 'linkText': 'Customize starting at $748', hyperLink: 'https://insideweather.com/products/se12ar11101013-oxford-weave-powell-sofette-in-pebble'}, {'image': 'https://cdn.shopify.com/s/files/1/2994/0144/files/3.0_cat_sofette_col_04.jpg?1661542', 'title': 'Brooklyn Sofette', 'linkText': 'Customize starting at $848', hyperLink: 'https://insideweather.com/products/se19bl11101010-cross-weave-brooklyn-sofette-in-cloud'}, {'image': 'https://cdn.shopify.com/s/files/1/2994/0144/files/3.0_cat_sofette_col_05.jpg?1661542', 'title': 'Asher Sofette', 'linkText': 'Customize starting at $1048', hyperLink: 'https://insideweather.com/products/se22bd11101014-pebble-weave-asher-sofette-in-heathered-slate'}, {'image': 'https://cdn.shopify.com/s/files/1/2994/0144/files/3.0_cat_sofette_col_06.jpg?1661542', 'title': 'Nox Sofette', 'linkText': 'Customize starting at $748', hyperLink: 'https://insideweather.com/products/se13bc11101021-pebble-weave-nox-sofette-in-heathered-taupe'}, {'image': 'https://cdn.shopify.com/s/files/1/2994/0144/files/3.0_cat_sofette_col_07.jpg?1661542', 'title': 'Jett Sofette', 'linkText': 'Customize starting at $998', hyperLink: 'https://insideweather.com/products/se17ar11101015-oxford-weave-jett-sofette-in-pebble'}, {'image': 'https://cdn.shopify.com/s/files/1/2994/0144/files/3.0_cat_sofette_col_08.jpg?1661542', 'title': 'Milo Sofette', 'linkText': 'Customize starting at $798', hyperLink: 'https://insideweather.com/products/se14bl11101023-cross-weave-milo-sofette-in-cloud'}]" %}

    <div class="productCollection --pd-t-130">
      <div class="category-collection-main-wrapper">
        <category-collections
          :product-collections="{{productCollections}}"
          section-heading="Start with a Silhouette"
          section-description="Choose your favorite collection and make it your own."
        >
        </category-collections>
      </div>
    </div>

    {% assign listItems = "[{'image':'http://cdn.insideweather.com/cat/sofa-line/customize/cat_sofette_customize-bnr_m_01_v1.png'},{'image':'http://cdn.insideweather.com/cat/sofa-line/customize/cat_sofette_customize-bnr_m_02_v1.png'}]"%}
    
    <div class="customizable-category --pd-t-110 --pd-b-130">
      <div class="customizable-wrapper" style="background-color: #BFD4D7">
        <customizable-category
          :list-items="{{listItems}}"
          destination-url="https://insideweather.com/products/se17an131010171010-custom-issa-sofette-in-cloud"
          desktop-image="http://cdn.insideweather.com/cat/sofa-line/customize/cat_sofette_customize-bnr_d_01_v1.png"
          btn-text="Customize Now"
          section-heading="The Most Customizable Loveseat On the Internet"
          section-description="When we say custom, we mean it. Explore all the ways you can modify our apartment sofa to make it truly yours. Each one is made to order—per your specs—at our California Crafthouse and ships FREE to your doorstep months faster than any other  &ldquo;custom&rdquo; maker out there."
        >
        </customizable-category>
      </div>
    </div>

    {% assign categoryDetails = "[{'isVideo':'true','objectUrl': 'http://cdn.insideweather.com/cat/sofa-line/details/cat_sofa_upholstery_d.mp4', 'objectUrlMob': 'http://cdn.insideweather.com/cat/sofa-line/details/cat_sofa_upholstery_m.mp4', 'title': 'Upholsteries Galore','description': 'The mecca of fabric libraries if you will. Choose from 100+ choices than span the rainbow, all of which are hand-stitched here in California. We’re talkin’ stain-resistant Performance Upholsteries, Pet-friendly possibilities, and even Commercial Grade selections so find one that’s truly tailored to comfort your needs (& potential mischief). Your match is here, you just have to find it!'}]" %}
    {% assign isReverse = false %}
    {% assign isDescImg = true %}

    <div class="categoryDetails">
      <category-detail 
        :is-reverse="{{isReverse}}"
        :is-desc-img="{{isDescImg}}"
        desktop-image="http://cdn.insideweather.com/cat/sofa-line/details/cat_sofa_upholstery-icons_d_v2.png"
        mobile-image="http://cdn.insideweather.com/cat/sofa-line/details/cat_sofa_upholstery-icons_m_v2.png"
        :category-details="{{categoryDetails}}"></category-detail>
    </div>

    {% assign categoryDetails = "[{'isVideo':'false','objectUrl': 'http://cdn.insideweather.com/cat/sofa-line/details/cat_sofa_lifeproof_d_v2.jpg', 'objectUrlMob': 'http://cdn.insideweather.com/cat/sofa-line/details/cat_sofa_lifeproof_m_v2.jpg', 'title': 'A Life-Proof Loveseat','description': 'Our sofettes are designed to withstand whatever life throws at them. Every upholstered element of each frame is enclosed in a water-resistant nylon casing for the ultimate protection against, well, you. This means even the back panel, the arms, and—of course—the pillows & cushions have this added layer of protection. Additionally, every cushion & pillow features a concealed zipper for easy, practical removal & cleaning. P.S. For fabric specific info on durability, check out Wyzenbeek Test Method Rub Count Scores on each product page!'}]" %}
    {% assign isReverse = true %}
    {% assign isDescImg = false %}

    <div class="categoryDetails --pd-t-130">
      <category-detail 
        :is-reverse="{{isReverse}}"
        :is-desc-img="{{isDescImg}}"
        :category-details="{{categoryDetails}}"></category-detail>
    </div>

    {% assign options = "[{'index': '1','dImage': 'http://cdn.insideweather.com/cat/sofa-line/details/cat_sofa_custom-comfort_01_d.png','mImage': 'http://cdn.insideweather.com/cat/sofa-line/details/cat_sofa_custom-comfort_01_m.png','heading': 'CLASSIC BLEND','desc': 'Supportive Comfort | Firm yet cushy sit','icon': 'http://cdn.insideweather.com/cat/sofa-line/details/cat_sofa_custom-comfort-icon_01.png','description': 'A medium density, high resilience foam topped with a plush layer of our signature, 100% recycled down alternative. The perfect balance of support, squish and a little bit of bounce.'},{'index': '2','dImage': 'http://cdn.insideweather.com/cat/sofa-line/details/cat_sofa_custom-comfort_02_d.png','mImage': 'http://cdn.insideweather.com/cat/sofa-line/details/cat_sofa_custom-comfort_02_m.png','heading': 'MEMORY FOAM BLEND','desc': 'Sink-in Comfort | Plush contouring layers','icon': 'http://cdn.insideweather.com/cat/sofa-line/details/cat_sofa_custom-comfort-icon_02.png','description': 'A smooth, transitional layer of temperature-regulating memory foam sits atop medium density, high resiliency foam and is wrapped in a lush layer of our sustainable, recycled down alternative.'}]"%}

    <div class="custom-comfort-detail-category --pd-t-110 --pd-b-110">
      <div class="custom-comfort-wrapper">
        <custom-comfort
          :options="{{options}}"
          section-heading="Custom Comfort"
          section-description="We believe that one size does not fit all which is why we've decided to hand over all comfort control to you—the actual sofa snuggler. Choose between various layers of domestically sourced insert options to find the custom formula that's truly right for you."
        >
        </custom-comfort>
      </div>
    </div>

    {% assign categoryDetails = "[{'isVideo':'false','objectUrl': 'http://cdn.insideweather.com/cat/sofa-line/details/cat_sofa_sustainable_d.jpg', 'objectUrlMob': 'http://cdn.insideweather.com/cat/sofa-line/details/cat_sofa_sustainable_m.jpg', 'title': 'The Sofa of 200 Plastic Bottles','description': 'Every upholstered portion of our sofa (yes, even the back) is wrapped in a layer of our Signature Synthetic Down and the pillows are full of it. This cushy, cloud-like material is 100% recycled down alternative and one sofa = roughly 200 recycled plastic bottles. The disposable bottles that we upcycle are sterilized in hot water, ground into tiny flakes, re-melted and extruded to make a polyester fiber. This material helps keep plastics out of our landfills & oceans and helps fill your home with comfortable, sustainable products as we believe both Mother Earth and your comfort are both uncompromisable.'}]" %}
    {% assign isReverse = false %}
    {% assign isDescImg = false %}

    <div class="categoryDetails --pd-b-110">
      <category-detail 
        :is-reverse="{{isReverse}}"
        :is-desc-img="{{isDescImg}}"
        :category-details="{{categoryDetails}}"></category-detail>
    </div>

    {% assign categoryValueProps = "[{'image':'https://cdn.shopify.com/s/files/1/2994/0144/files/3.0_cat_vprop_01-ca-crafted-min.jpg?1661468', 'imageSm': 'https://cdn.shopify.com/s/files/1/2994/0144/files/3.0_cat_vprop_01-ca-crafted_m_min.jpg?1661495', 'title':'California Crafted','description':'Every one of our pieces is made-to-order from our workshop in California. Sawing, sewing, packaging, and shipping—we see it all through from start to finish!'},{'image':'https://cdn.shopify.com/s/files/1/2994/0144/files/3.0_cat_vprop_02-free-ship-min.jpg?1661468', 'imageSm': 'https://cdn.shopify.com/s/files/1/2994/0144/files/3.0_cat_vprop_02-free-ship_m_min.jpg?1661495', 'title':'Quick Ship Custom','description':'Custom furniture no longer means months of waiting. Our business model allows for each product to be highly customized to you, and sent off to your doorstep within a matter of days. Did we mention everything ships free?'},{'image':'https://cdn.shopify.com/s/files/1/2994/0144/files/3.0_cat_vprop_03-home-trial-min.jpg?1661468', 'imageSm': 'https://cdn.shopify.com/s/files/1/2994/0144/files/3.0_cat_vprop_03-home-trial_m_min.jpg?1661495', 'title':'365 Day Home Trial','description':'Take some time to get acclimated to your new furniture. In fact, take all four seasons if you have to! You’ve got 365 days to try it out. Still not satisfied? We’ll take it back.'}, {'image':'https://cdn.shopify.com/s/files/1/2994/0144/files/3.0_cat_vprop_04-sustainable_d-min.png?v=1583278319', 'imageSm': 'https://cdn.shopify.com/s/files/1/2994/0144/files/3.0_cat_vprop_04-sustainable_m-min.png?v=1583278319', 'title':'One for One','description':'Inside for Outside. For every order placed with us, one tree is planted via the National Forest Foundation. Sleep easier knowing you’ve got the most sustainable furniture on the market.'}]"%}

    <div class="categoryValuePropsWrapper">
      <category-vprops
      :category-value-props="{{categoryValueProps}}"
      background-color="#F2F2F2"
      >
      </category-vprops>
    </div>

    {% assign lifeStyleItems = "[{'image': 'https://cdn.shopify.com/s/files/1/2994/0144/files/3.0_cat_sofettes_lg_01-min.jpg?1661552','popUpList': [{'productImage':'https://banksy-images.s3.amazonaws.com/items/141S3F4595E5/141S3F4595E5-0_small.jpg','title':'Micro Suede Milo Sofette in Charcoal','price':'$1,148', 'productUrl':'https://insideweather.com/products/se14bn11111114-micro-suede-milo-sofette-in-charcoal'}, {'productImage':'https://banksy-images.s3.amazonaws.com/items/47S3CEB8D42/47S3CEB8D42-0_small.jpg','title':'Latte Oval Coffee Table in Cream','price':'$178', 'productUrl':'https://insideweather.com/products/ct16gk12-latte-oval-coffee-table-in-cream'}]},
    {'image': 'https://cdn.shopify.com/s/files/1/2994/0144/files/3.0_cat_sofettes_lg_02-min.jpg?1661552','popUpList': [{'productImage':'https://banksy-images.s3.amazonaws.com/items/141S74286CAA/141S74286CAA-0_small.jpg','title':'Vegan Leather Issa Sofette in Ivory','price':'$1023', 'productUrl':'https://insideweather.com/products/se18bb10121012-vegan-leather-issa-sofette-in-ivory'}, {'productImage':'https://banksy-images.s3.amazonaws.com/items/47SA643C56D/47SA643C56D-0_small.jpg','title':'Latte Round Side Table in Latte Wood','price':'$123', 'productUrl':'https://insideweather.com/products/st12fi12-latte-round-side-table-in-latte-wood'},]},
    {'image': 'https://cdn.shopify.com/s/files/1/2994/0144/files/3.0_cat_sofettes_lg_03-min.jpg?1661554','popUpList': [{'productImage':'https://banksy-images.s3.amazonaws.com/items/141S7AE4FF4E/141S7AE4FF4E-0_small.jpg','title':'Mod Velvet Issa Sofette in Vanilla','price':'$898', 'productUrl':'https://insideweather.com/products/se18ad10101020-mod-velvet-issa-sofette-in-vanilla'},]}, {'image': 'https://cdn.shopify.com/s/files/1/2994/0144/files/3.0_cat_sofettes_lg_04-min.jpg?1661552','popUpList': [{'productImage':'https://banksy-images.s3.amazonaws.com/items/141SB50310B6/141SB50310B6-0_small.jpg','title':'Mod Velvet Powell Sofette in Jade Green','price':'$1073', 'productUrl':'https://insideweather.com/products/se12ba11131115-mod-velvet-powell-sofette-in-jade-green'}, {'productImage':'https://banksy-images.s3.amazonaws.com/items/47S7600861F/47S7600861F-0_small.jpg','title':'Espresso Round Side Table in Espresso Wood','price':'$123', 'productUrl':'hhttps://insideweather.com/products/st13fy13-espresso-round-side-table-in-espresso-wood'} ]},
    {'image': 'https://cdn.shopify.com/s/files/1/2994/0144/files/3.0_cat_sofettes_lg_05-min.jpg?1661552','popUpList': [{'productImage':'https://banksy-images.s3.amazonaws.com/items/141S79DD3E61/141S79DD3E61-0_small.jpg','title':'Linen Weave Issa Sofette in Dijon','price':'$823', 'productUrl':'https://insideweather.com/products/se18bi11111012-linen-weave-issa-sofette-in-dijon'}, {'productImage':'https://banksy-images.s3.amazonaws.com/items/47SA643C56D/47SA643C56D-0_small.jpg','title':'Latte Round Side Table in Latte Wood','price':'$123', 'productUrl':'https://insideweather.com/products/st12fi12-latte-round-side-table-in-latte-wood'}]}, 
    {'image': 'https://cdn.shopify.com/s/files/1/2994/0144/files/3.0_cat_sofettes_lg_06-min.jpg?1661552','popUpList': [{'productImage':'https://banksy-images.s3.amazonaws.com/items/141S17FC3C8F/141S17FC3C8F-0_small.jpg','title':'Cross Weave Issa Sofette in Cloud','price':'$723', 'productUrl':'https://insideweather.com/products/se18bl11111012-cross-weave-issa-sofette-in-cloud'}, {'productImage':'https://banksy-images.s3.amazonaws.com/items/47SA643C56D/47SA643C56D-0_small.jpg','title':'Latte Round Side Table in Latte Wood','price':'$123', 'productUrl':'https://insideweather.com/products/st12fi12-latte-round-side-table-in-latte-wood'},]},
    {'image': 'https://cdn.shopify.com/s/files/1/2994/0144/files/3.0_cat_sofettes_lg_07-min.jpg?1661552','popUpList': [{'productImage':'https://banksy-images.s3.amazonaws.com/items/141S3D83824B/141S3D83824B-0_small.jpg','title':'Cross Weave Asher Sofette in Yale Blue','price':'$1,048', 'productUrl':'https://insideweather.com/products/se22aa11101014-cross-weave-asher-sofette-in-yale-blue'},]}, {'image': 'https://cdn.shopify.com/s/files/1/2994/0144/files/3.0_cat_sofettes_lg_08-min.jpg?1661552','popUpList': [{'productImage':'https://banksy-images.s3.amazonaws.com/items/141S4202BDD5/141S4202BDD5-0_small.jpg','title':'Cross Weave Milo Sofette in Cayenne','price':'$873', 'productUrl':'https://insideweather.com/products/se14bo11121012-cross-weave-milo-sofette-in-cayenne'}, {'productImage':'https://banksy-images.s3.amazonaws.com/items/47SA643C56D/47SA643C56D-0_small.jpg','title':'Latte Round Side Table in Latte Wood','price':'$123', 'productUrl':'https://insideweather.com/products/st12fi12-latte-round-side-table-in-latte-wood'}]},  {'image': 'https://cdn.shopify.com/s/files/1/2994/0144/files/3.0_cat_sofettes_lg_10-min.jpg?1661552','popUpList': [{'productImage':'https://banksy-images.s3.amazonaws.com/items/141S807ED76F/141S807ED76F-0_small.jpg','title':'Mod Velvet Milo Sofette in Blue Topaz','price':'$973', 'productUrl':'https://insideweather.com/products/se14bp11141210-mod-velvet-milo-sofette-in-blue-topaz'}]}, {'image': 'https://cdn.shopify.com/s/files/1/2994/0144/files/3.0_cat_sofettes_lg_09-min.jpg?1661552','popUpList': [{'productImage':'https://banksy-images.s3.amazonaws.com/items/141S77390D59/141S77390D59-0_small.jpg','title':'Linen Weave Issa Sofette in Dijon','price':'$823', 'productUrl':'https://insideweather.com/products/se18bi11111012-linen-weave-issa-sofette-in-dijon'}]}]"%}

    <div class="section_lifeStylePhotos --pd-t-130 --pd-b-130">
      <life-style-photos
        :life-style-items="{{lifeStyleItems}}"
        section-heading="Visualize the Possibilities"
        section-description="Ask more from your furniture."
        pop-up-heading="Visualize the Possibilities"
      >
      </life-style-photos>
    </div>
  </div>
</div>

<script>
const controller = new ScrollMagic.Controller();

function fadeinup(a, t, y=20) {
  var el=a;
  var tar=t;
  var set=TweenMax.staggerFromTo(el, 0.8, {
    opacity: 0,
    y: y
  }
  , {
    y: 0, opacity: 1, force3D: true
  }
  , 0.2);
  new ScrollMagic.Scene( {
    triggerElement: tar, reverse: false, triggerHook: "onEnter", offset: 250
  }
  ).setTween(set).addTo(controller);
}

function fadeIn(a, t) {
  var el=a;
  var tar=t;
  var setFade=TweenMax.staggerFromTo(el, 0.8, {opacity: 0}, { opacity: 1, force3D: true
  }, 1);
  new ScrollMagic.Scene( {
    triggerElement: tar, reverse: false, triggerHook: "onEnter", offset: 250
  }
  ).setTween(setFade).addTo(controller);
}

jQuery(function ($) {

  $('.CategoryBanner--clasification .point').click(function(){
    if($(this).hasClass('show-details')) {
      event.preventDefault();
      event.stopPropagation();
      $(this).find('p').slideToggle();
      $(this).removeClass('show-details');
      $('.CategoryBanner .owl-dots button:nth-of-type(1)').trigger('click');
    } else {
      $('.CategoryBanner--clasification .point p').slideUp();
      $(this).find('p').slideDown();
      $('.CategoryBanner--clasification .point').removeClass('show-details');
      $(this).addClass('show-details');
    }
  });

  fadeinup('.CategoryBanner .--animElement', ".CategoryBanner");
  if($(window).width() < 992) {
    fadeinup('.CategoryBanner .owl-dots button', ".CategoryBanner");
  } else {
    fadeinup('.CategoryBanner--clasification .point', ".CategoryBanner");
  }

  fadeinup('.CtegoryCollections .HeadingWithDescription *', ".productCollection");
  const collectionTween = new TimelineLite()
  collectionTween.call(function () {
    $('.CtegoryCollections--itemWrapper li').each(function (i) {
      var row = $(this).find('.--animElement');
      setTimeout(function() {
        TweenMax.staggerFromTo(row, 0.8, {opacity: 0, y: 20}, {opacity: 1, y: 0, force3D: true}, 0.2);
        if($('.CtegoryCollections--itemWrapper li').length === (i + 1)) {
          $('.CtegoryCollections--itemWrapper').addClass('--animLoaded');
        }
      }, 200 * i);
    });
  });

  new ScrollMagic.Scene({
    triggerElement: '.CtegoryCollections--itemWrapper',
    reverse: false,
    triggerHook: "onEnter",
    offset: 250
  }).setTween(collectionTween).addTo(controller);

  $('.CategoryDetails .image-content-box').each(function (i) {
    var figureElement = $(this).find('figure');
    var contentElements = $(this).find('.HeadingWithDescription *');
    var videoDetect = $(figureElement).find('video');
    var categoryDetailsTween=TweenMax.staggerFromTo(figureElement, 0.8, {opacity: 0,y: 20}, {y: 0, opacity: 1, force3D: true}, 0.2);
    new ScrollMagic.Scene( {
      triggerElement: '.CategoryDetails .image-content-box:nth-of-type('+ (i + 1) +')',
      reverse: false, triggerHook: "onEnter", offset: 250
    }).setTween(categoryDetailsTween).addTo(controller);

    var categoryDetailsContentTween=TweenMax.staggerFromTo(contentElements, 0.8, {opacity: 0,y: 20}, {y: 0, opacity: 1, force3D: true}, 0.4);
    new ScrollMagic.Scene( {
      triggerElement: '.CategoryDetails .image-content-box:nth-of-type('+ (i + 1) +')',
      reverse: false, triggerHook: "onEnter", offset: 250
    }).setTween(categoryDetailsContentTween).addTo(controller);

  });

  fadeinup('.CategoryVideo--videoFrame', '.section_categoryVideo', 100);
  fadeinup('.section_categoryVideo .HeadingWithDescription *', '.section_categoryVideo .HeadingWithDescription');
  $('.categoryValueProps').each(function (i) {
    fadeinup('.categoryValueProps:nth-of-type('+ (i + 1) +') .--animElement', '.categoryValueProps:nth-of-type('+ (i + 1) +')')
  });

  fadeinup('.LifeStylePhotos .HeadingWithDescription *', '.section_lifeStylePhotos');

  $('.LifeStylePhotos--gridContainer .LifeStylePhotos--column').each(function (i) {
    fadeinup('.LifeStylePhotos--column:nth-of-type('+ (i + 1) +') figure', '.LifeStylePhotos--column:nth-of-type('+ (i + 1) +')', 50)
    fadeIn('.LifeStylePhotos--column:nth-of-type('+ (i + 1) +') .more-info', '.LifeStylePhotos--column:nth-of-type('+ (i + 1) +')')
  });
});

function toggleSlide(item) {
  jQuery(item).slideToggle();
}
function downSlide(item) {
  jQuery(item).slideDown();
}
</script>
