<div id="app">
  <div class="categorySofas">
    {% assign hideDesktopSlider = true %}
    {% assign hideMobileSlider = false %}
    {% assign bannerContent = "{'items':[{'image':'https://cdn.shopify.com/s/files/1/2994/0144/files/3.0_cat_side-tables_tb_d_00-min.jpg?1663692', 'imageSm': 'https://cdn.shopify.com/s/files/1/2994/0144/files/3.0_cat_side-tables_tb_m_00-min.jpg?1663692','heading':'Side tables','description':'Start with a silhouette and color in the rest.','linkText':'Customize now','url':'https://insideweather.com/products/st12cz12-latte-round-side-table-in-nordic-watercolor', dataSource: 'default'},{'image':'https://cdn.shopify.com/s/files/1/2994/0144/files/3.0_cat_side-tables_tb_d_01-min.jpg?1663692', 'imageSm': 'https://cdn.shopify.com/s/files/1/2994/0144/files/3.0_cat_side-tables_tb_m_01-min.jpg?1663692','heading':'Table Top','description':'Got a favorite finish? Find it in your favorite shape.','linkText':'Customize now','url':'https://insideweather.com/products/st12cz12-latte-round-side-table-in-nordic-watercolor', dataSource: 'table-top'},{'image':'https://cdn.shopify.com/s/files/1/2994/0144/files/3.0_cat_side-tables_tb_d_02-min.jpg?1663692','imageSm': 'https://cdn.shopify.com/s/files/1/2994/0144/files/3.0_cat_side-tables_tb_m_02-min.jpg?1663692','heading':'Surface Design','description':'Style your new sidekick with 80+ custom colors and prints.','linkText':'Customize now','url':'https://insideweather.com/products/st12cz12-latte-round-side-table-in-nordic-watercolor', dataSource: 'surface-design'}, {'image':'https://cdn.shopify.com/s/files/1/2994/0144/files/3.0_cat_side-tables_tb_d_03-min.jpg?1663692','imageSm': 'https://cdn.shopify.com/s/files/1/2994/0144/files/3.0_cat_side-tables_tb_m_03-min.jpg?1663692','heading':'Base Style','description':'Everything from elegant hairpins to tapered brass.','linkText':'Customize now','url':'https://insideweather.com/products/st12cz12-latte-round-side-table-in-nordic-watercolor', dataSource: 'base-style'}]}"%}

    {% assign categoryBannerAccordion = "[{'accordionHead': 'Table Top', 'accordionDescription': 'Got a favorite finish? Find it in your favorite shape.', 'accordionTarget': 'table-top'},{'accordionHead': 'Surface Design', 'accordionDescription': 'Style your new sidekick with 80+ custom colors and prints.', 'accordionTarget': 'surface-design'}, {'accordionHead': 'Base Style', 'accordionDescription': 'Everything from elegant hairpins to tapered brass.', 'accordionTarget': 'base-style'}]" %}

    <category-banner 
      :banner-content="{{bannerContent}}"
      :hide-desktop-slider="{{hideDesktopSlider}}"
      :category-banner-accordion="{{categoryBannerAccordion}}"
      >
    </category-banner>

    {% assign productCollections = "[{'image': 'https://cdn.shopify.com/s/files/1/2994/0144/files/3.0_cat_side-table_col_01.jpg?1663695', 'title': 'Round Side Table', 'linkText': 'Customize starting at $113', hyperLink: 'https://insideweather.com/products/st12cf12-latte-round-side-table-in-retro-light-gray'}, {'image': 'https://cdn.shopify.com/s/files/1/2994/0144/files/3.0_cat_side-table_col_02.jpg?1663695', 'title': 'Rectangle Side Table', 'linkText': 'Customize starting at $98', hyperLink: 'hhttps://insideweather.com/products/st14cf12-latte-rectangle-side-table-in-retro-light-gray'}, {'image': 'https://cdn.shopify.com/s/files/1/2994/0144/files/3.0_cat_side-table_col_03.jpg?1663695', 'title': 'Square Side Table', 'linkText': 'Customize starting at $98', hyperLink: 'https://insideweather.com/products/st10cf12-latte-square-side-table-in-retro-light-gray'}]" %}

    <div class="productCollection --pd-t-130">
      <div class="category-collection-main-wrapper">
        <category-collections
          :product-collections="{{productCollections}}"
          section-heading="Start with a Shape"
          section-description="Customize every detail from tabletop design all the way down to the legs."
        >
        </category-collections>
      </div>
    </div>

    {% assign productDetails = "[{'isVideo':'false','objectUrl': 'https://cdn.shopify.com/s/files/1/2994/0144/files/3.0_cat_tables_details_01_d-min.jpg?1663192', 'objectUrlMob': 'https://cdn.shopify.com/s/files/1/2994/0144/files/3.0_cat_tables_details_01_m-min.jpg?1663192', 'title': 'Customize Your Style','description': 'Whether you’ve got a favorite color, a thing for wood grain, or you simply dig stylish patterns, the top of your table is prime real estate to make a statement and put the perfect accent on your room.'},{'isVideo':'true', 'objectUrl': 'https://cdn.shopify.com/s/files/1/2994/0144/files/3.0_cat_tables_details_02_d.mp4?1663087', 'objectUrlMob': 'https://cdn.shopify.com/s/files/1/2994/0144/files/3.0_cat_tables_details_02_m.mp4?1663170', 'title': 'Life-Proof','description': 'Not only does it look good, but it’s also ruggedly durable. A scuff-free, UV-resistant surface means that it’s perfect for that sunny spot in your home. It’s also FDA approved for all you messy eaters out there. And when you’re done, wipe it down with any cleaner you like.'},{'isVideo':'false', 'objectUrl': 'https://cdn.shopify.com/s/files/1/2994/0144/files/3.0_cat_tables_details_03_d-min.jpg?1663183', 'objectUrlMob': 'https://cdn.shopify.com/s/files/1/2994/0144/files/3.0_cat_tables_details_03_m-min.jpg?1663183', 'title': 'Materials You Want','description': 'Your table is constructed from 100% FSC-certified birchwood, so you know it’s sustainable and dependable. Woods and metals for the bases are made from solid ash wood and high-strength, powder-coated stainless steel. Don’t worry, we’ll never skip the details.'},]" %}

    <div class="productDetails --pd-t-130 --pd-b-130">
      <category-details :product-details="{{productDetails}}"></category-details>
    </div>

    {% assign categoryValueProps = "[{'image':'https://cdn.shopify.com/s/files/1/2994/0144/files/3.0_cat_vprop_01-ca-crafted-min.jpg?1661468', 'imageSm': 'https://cdn.shopify.com/s/files/1/2994/0144/files/3.0_cat_vprop_01-ca-crafted_m_min.jpg?1661495', 'title':'California Crafted','description':'Every one of our pieces is made-to-order from our workshop in California. Sawing, sewing, packaging, and shipping—we see it all through from start to finish!'},{'image':'https://cdn.shopify.com/s/files/1/2994/0144/files/3.0_cat_vprop_02-free-ship-min.jpg?1661468', 'imageSm': 'https://cdn.shopify.com/s/files/1/2994/0144/files/3.0_cat_vprop_02-free-ship_m_min.jpg?1661495', 'title':'Free Shipping','description':'That’s right. Free shipping on every order! And did we mention that it ships within days? Besides, life’s too short to wait...and you desperately need a place to sit.'},{'image':'https://cdn.shopify.com/s/files/1/2994/0144/files/3.0_cat_vprop_03-home-trial-min.jpg?1661468', 'imageSm': 'https://cdn.shopify.com/s/files/1/2994/0144/files/3.0_cat_vprop_03-home-trial_m_min.jpg?1661495', 'title':'365 Day Home Trial','description':'Take some time to get acclimated to your new design. In fact, take all four seasons if you have to! You’ve got 365 days to try it out. Still not satisfied? We’ll take it back.'}]"%}
    
    <div class="categoryValuePropsWrapper">
      <category-vprops 
      :category-value-props="{{categoryValueProps}}"
      background-color="#F2F2F2"
      >
      </category-vprops>
    </div>

    {% assign lifeStyleItems = "[{'image': 'https://cdn.shopify.com/s/files/1/2994/0144/files/3.0_cat_side-tables_lg_01-min.jpg?1663704','popUpList': [{'productImage':'https://banksy-images.s3.amazonaws.com/items/47S7600861F/47S7600861F-0_small.jpg','title':'Espresso Round Side Table in Espresso Wood','price':'$123', 'productUrl':'https://insideweather.com/products/st13fy13-espresso-round-side-table-in-espresso-wood'}]},
    {'image': 'https://cdn.shopify.com/s/files/1/2994/0144/files/3.0_cat_side-tables_lg_02-min.jpg?1663704','popUpList': [{'productImage':'https://banksy-images.s3.amazonaws.com/items/150S30A4F09B/150S30A4F09B-0_small.jpg','title':'Pebble Weave Levi Sofa in Poppy Orange','price':'$1348', 'productUrl':'https://insideweather.com/products/sf15ap1113141014-pebble-weave-levi-sofa-in-poppy-orange'}, {'productImage':'https://banksy-images.s3.amazonaws.com/items/47SA643C56D/47SA643C56D-0_small.jpg','title':'Latte Round Side Table in Latte Wood','price':'$123', 'productUrl':'https://insideweather.com/products/st12fi12-latte-round-side-table-in-latte-wood'},]},
    {'image': 'https://cdn.shopify.com/s/files/1/2994/0144/files/3.0_cat_side-tables_lg_03-min.jpg?1663704','popUpList': [{'productImage':'https://banksy-images.s3.amazonaws.com/items/195S84CAE066/195S84CAE066-0_small.jpg','title':'Latte Sloan Credenza in Green Marble','price':'$518', 'productUrl':'https://insideweather.com/products/cr10fq1014-latte-sloan-credenza-in-green-marble'}, {'productImage':'https://banksy-images.s3.amazonaws.com/items/47S753F88CC/47S753F88CC-0_small.jpg','title':'Espresso Rectangle Side Table in Green Marble','price':'$108', 'productUrl':'https://insideweather.com/products/st15fl13-espresso-rectangle-side-table-in-green-marble'}]}, {'image': 'https://cdn.shopify.com/s/files/1/2994/0144/files/3.0_cat_side-tables_lg_04-min.jpg?1663704','popUpList': [{'productImage':'https://banksy-images.s3.amazonaws.com/items/150S3770064C/150S3770064C-0_small.jpg','title':'Cross Weave Levi Sofa in Raven Gray','price':'$1248', 'productUrl':'https://insideweather.com/products/sf15ao1012101015-cross-weave-levi-sofa-in-raven-gray'}, {'productImage':'https://banksy-images.s3.amazonaws.com/items/47S7600861F/47S7600861F-0_small.jpg','title':'Espresso Round Side Table in Espresso Wood','price':'$123', 'productUrl':'https://insideweather.com/products/st13fy13-espresso-round-side-table-in-espresso-wood'}]},
    {'image': 'https://cdn.shopify.com/s/files/1/2994/0144/files/3.0_cat_side-tables_lg_05-min.jpg?1663704','popUpList': [{'productImage':'https://banksy-images.s3.amazonaws.com/items/48SEEBF6157/48SEEBF6157-0_small.jpg','title':'Latte Square Side Table in Nordic Cream','price':'$118', 'productUrl':'https://insideweather.com/products/st10dk11-latte-square-side-table-in-nordic-cream'}]},
    {'image': 'https://cdn.shopify.com/s/files/1/2994/0144/files/3.0_cat_side-tables_lg_06-min.jpg?1663705','popUpList': [{'productImage':'https://banksy-images.s3.amazonaws.com/items/141S17FC3C8F/141S17FC3C8F-0_small.jpg','title':'Cross Weave Issa Sofette in Cloud','price':'$648', 'productUrl':'https://insideweather.com/products/se18bl11111012-cross-weave-issa-sofette-in-cloud'}, {'productImage':'https://banksy-images.s3.amazonaws.com/items/47SA643C56D/47SA643C56D-0_small.jpg','title':'Latte Round Side Table in Latte Wood','price':'$123', 'productUrl':'https://insideweather.com/products/st12fi12-latte-round-side-table-in-latte-wood'}]}, 
    {'image': 'https://cdn.shopify.com/s/files/1/2994/0144/files/3.0_cat_side-tables_lg_07-min.jpg?1663704','popUpList': [{'productImage':'https://banksy-images.s3.amazonaws.com/items/48S71BB2536/48S71BB2536-0_small.jpg','title':'Espresso Round Side Table in Espresso Wood','price':'$143', 'productUrl':'https://insideweather.com/products/st13fy17-espresso-round-side-table-in-espresso-wood'}, {'productImage':'https://banksy-images.s3.amazonaws.com/items/138S493F326E/138S493F326E-0_small.jpg','title':'Linen Weave Issa Armchair in Fog','price':'$423', 'productUrl':'https://insideweather.com/products/ac18bg11101016-linen-weave-issa-armchair-in-fog'}]},
    {'image': 'https://cdn.shopify.com/s/files/1/2994/0144/files/3.0_cat_side-tables_lg_08-min.jpg?1663704','popUpList': [{'productImage':'https://banksy-images.s3.amazonaws.com/items/47S924BC418/47S924BC418-0_small.jpg','title':'Latte Round Side Table in Blush Marble','price':'$123', 'productUrl':'https://insideweather.com/products/st12gw12-latte-round-side-table-in-blush-marble'}]},  
    {'image': 'https://cdn.shopify.com/s/files/1/2994/0144/files/3.0_cat_side-tables_lg_10-min.jpg?1663704','popUpList': [{'productImage':'https://banksy-images.s3.amazonaws.com/items/141S4202BDD5/141S4202BDD5-0_small.jpg','title':'Cross Weave Milo Sofette in Cayenne','price':'$898', 'productUrl':'https://insideweather.com/products/se14bo1111121012-cross-weave-milo-sofette-in-cayenne'}, {'productImage':'https://banksy-images.s3.amazonaws.com/items/47SA643C56D/47SA643C56D-0_small.jpg','title':'Latte Round Side Table in Latte Wood','price':'$123', 'productUrl':'https://insideweather.com/products/st12fi12-latte-round-side-table-in-latte-wood'}]},
    {'image': 'https://cdn.shopify.com/s/files/1/2994/0144/files/3.0_cat_side-tables_lg_09-min.jpg?1663704','popUpList': [{'productImage':'https://banksy-images.s3.amazonaws.com/items/47SA643C56D/47SA643C56D-0_small.jpg','title':'Latte Round Side Table in Latte Wood','price':'$123', 'productUrl':'https://insideweather.com/products/st12fi12-latte-round-side-table-in-latte-wood'}, {'productImage':'https://banksy-images.s3.amazonaws.com/items/141S5115AF77/141S5115AF77-0_small.jpg','title':'Oxford Weave Milo Sofette in Daffodil','price':'$1073', 'productUrl':'https://insideweather.com/products/se14bj1013141014-oxford-weave-milo-sofette-in-daffodil'}]}]"%}

    <div class="section_lifeStylePhotos --pd-t-130 --pd-b-130">
      <life-style-photos
        :life-style-items="{{lifeStyleItems}}"
        section-heading="Visualize the Possibilities"
        section-description="Ask more from your furniture."
        pop-up-heading="Visualize the Possibilities"
      >
      </life-style-photos>
    </div>
  </div>
</div>

<script>
const controller = new ScrollMagic.Controller();

function fadeinup(a, t, y=20) {
  var el=a;
  var tar=t;
  var set=TweenMax.staggerFromTo(el, 0.8, {
    opacity: 0,
    y: y
  }
  , {
    y: 0, opacity: 1, force3D: true
  }
  , 0.2);
  new ScrollMagic.Scene( {
    triggerElement: tar, reverse: false, triggerHook: "onEnter", offset: 250
  }
  ).setTween(set).addTo(controller);
}

function fadeIn(a, t) {
  var el=a;
  var tar=t;
  var setFade=TweenMax.staggerFromTo(el, 0.8, {opacity: 0}, { opacity: 1, force3D: true
  }, 1);
  new ScrollMagic.Scene( {
    triggerElement: tar, reverse: false, triggerHook: "onEnter", offset: 250
  }
  ).setTween(setFade).addTo(controller);
}

jQuery(function ($) { 
  
  $('.CategoryBanner--clasification .point').click(function(){
    if($(this).hasClass('show-details')) {
      event.preventDefault();
      event.stopPropagation();
      $(this).find('p').slideToggle();
      $(this).removeClass('show-details');
      $('.CategoryBanner .owl-dots button:nth-of-type(1)').trigger('click');
    } else {
      $('.CategoryBanner--clasification .point p').slideUp();
      $(this).find('p').slideDown();
      $('.CategoryBanner--clasification .point').removeClass('show-details');
      $(this).addClass('show-details');
    }
  });

  fadeinup('.CategoryBanner .--animElement', ".CategoryBanner");
  if($(window).width() < 992) {
    fadeinup('.CategoryBanner .owl-dots button', ".CategoryBanner");
  } else {
    fadeinup('.CategoryBanner--clasification .point', ".CategoryBanner");
  }

  fadeinup('.CtegoryCollections .HeadingWithDescription *', ".productCollection");
  const collectionTween = new TimelineLite()
  collectionTween.call(function () {
    $('.CtegoryCollections--itemWrapper li').each(function (i) {
      var row = $(this).find('.--animElement');
      setTimeout(function() {
        TweenMax.staggerFromTo(row, 0.8, {opacity: 0, y: 20}, {opacity: 1, y: 0, force3D: true}, 0.2);
        if($('.CtegoryCollections--itemWrapper li').length === (i + 1)) {
          $('.CtegoryCollections--itemWrapper').addClass('--animLoaded');
        }
      }, 200 * i);
    });
  });

  new ScrollMagic.Scene({
    triggerElement: '.CtegoryCollections--itemWrapper',
    reverse: false,
    triggerHook: "onEnter", 
    offset: 250
  }).setTween(collectionTween).addTo(controller);

  $('.CategoryDetails .image-content-box').each(function (i) {
    var figureElement = $(this).find('figure');
    var contentElements = $(this).find('.HeadingWithDescription *');
    var videoDetect = $(figureElement).find('video');
    var categoryDetailsTween=TweenMax.staggerFromTo(figureElement, 0.8, {opacity: 0,y: 20}, {y: 0, opacity: 1, force3D: true}, 0.2);
    new ScrollMagic.Scene( {
      triggerElement: '.CategoryDetails .image-content-box:nth-of-type('+ (i + 1) +')', 
      reverse: false, triggerHook: "onEnter", offset: 250
    }).setTween(categoryDetailsTween).addTo(controller);

    var categoryDetailsContentTween=TweenMax.staggerFromTo(contentElements, 0.8, {opacity: 0,y: 20}, {y: 0, opacity: 1, force3D: true}, 0.4);
    new ScrollMagic.Scene( {
      triggerElement: '.CategoryDetails .image-content-box:nth-of-type('+ (i + 1) +')', 
      reverse: false, triggerHook: "onEnter", offset: 250
    }).setTween(categoryDetailsContentTween).addTo(controller);

  });

  fadeinup('.CategoryVideo--videoFrame', '.section_categoryVideo', 100);
  fadeinup('.section_categoryVideo .HeadingWithDescription *', '.section_categoryVideo .HeadingWithDescription');
  $('.categoryValueProps').each(function (i) {
    fadeinup('.categoryValueProps:nth-of-type('+ (i + 1) +') .--animElement', '.categoryValueProps:nth-of-type('+ (i + 1) +')')
  });

  fadeinup('.LifeStylePhotos .HeadingWithDescription *', '.section_lifeStylePhotos');

  $('.LifeStylePhotos--gridContainer .LifeStylePhotos--column').each(function (i) {
    fadeinup('.LifeStylePhotos--column:nth-of-type('+ (i + 1) +') figure', '.LifeStylePhotos--column:nth-of-type('+ (i + 1) +')', 50)
    fadeIn('.LifeStylePhotos--column:nth-of-type('+ (i + 1) +') .more-info', '.LifeStylePhotos--column:nth-of-type('+ (i + 1) +')')
  });
});

function toggleSlide(item) {
  jQuery(item).slideToggle();
}
function downSlide(item) {
  jQuery(item).slideDown();
}
</script> 